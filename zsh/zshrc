### Added by Zinit's installer
if [[ ! -f $HOME/.zinit/bin/zinit.zsh ]]; then
    print -P "%F{33}â–“â–’â–‘ %F{220}Installing DHARMA Initiative Plugin Manager (zdharma/zinit)â€¦%f"
    command mkdir -p "$HOME/.zinit" && command chmod g-rwX "$HOME/.zinit"
    command git clone https://github.com/zdharma/zinit "$HOME/.zinit/bin" && \
        print -P "%F{33}â–“â–’â–‘ %F{34}Installation successful.%f%b" || \
        print -P "%F{160}â–“â–’â–‘ The clone has failed.%f%b"
fi

source "$HOME/.zinit/bin/zinit.zsh"
autoload -Uz _zinit
(( ${+_comps} )) && _comps[zinit]=_zinit
### End of Zinit's installer chunk

# My standard interactive shell config files
source ~/.config/standard.sh

# I'm a traitor in the shell. I like emacs bindings there
bindkey -e

# Easier history searching
# This has issues if you turbo load
zinit light zsh-users/zsh-history-substring-search
bindkey 'OA' history-substring-search-up
bindkey 'OB' history-substring-search-down
bindkey '^P'   history-substring-search-up
bindkey '^N'   history-substring-search-down

# Add syntax highlighting. We zpcompinit and zcpdreplay at init because syntax
# highlighters expect to be loaded last
zinit ice wait lucid atinit"zpcompinit; zpcdreplay"
zinit light zsh-users/zsh-syntax-highlighting

# Turbo load more completions. Use blockf and zinit creinstall to use zinit
# to handle completions
zinit ice wait lucid blockf atpull'zinit creinstall -q .'
zinit light zsh-users/zsh-completions

# These cannot be turboloaded because they don't work as expected
zinit for \
  jreese/zsh-titles \
  OMZ::lib/completion.zsh \
  OMZ::lib/history.zsh \
  OMZ::lib/key-bindings.zsh

# Turbo load what works well turbo-loaded
zinit wait lucid for \
  https://raw.githubusercontent.com/chriskempson/base16-shell/master/scripts/base16-solarized-dark.sh \
  OMZ::plugins/extract/extract.plugin.zsh \

if command -v direnv &>/dev/null; then
  eval "$(direnv hook zsh)"
fi

# Load nice prompt
zinit ice depth=1
zinit light romkatv/powerlevel10k

if [[ -f ~/.p10k.zsh ]]; then
  source ~/.p10k.zsh
fi

# Do ROS setup
if [[ -f /opt/ros/melodic/setup.zsh ]]; then
  source /opt/ros/melodic/setup.zsh
fi
