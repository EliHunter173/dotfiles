# My standard interactive shell config files, override oh-my-zsh
source ~/.standard.sh

# Install zinit if not already installed
if [ ! -d "${HOME}/.zinit" ]; then
  sh -c "$(curl -fsSL https://raw.githubusercontent.com/zdharma/zinit/master/doc/mod-install.sh)"
fi
module_path+=( "${HOME}/.zinit/mod-bin/zmodules/Src" )
source "${HOME}/.zinit/mod-bin/zinit.zsh"

# I'm a traitor in the shell. I like emacs bindings there
bindkey -e

# Pure Prompt
zinit ice pick"async.zsh" src"pure.zsh"
zinit light sindresorhus/pure

# Add syntax highlighting. We zpcompinit and zcpdreplay at init because syntax
# highlighters expect to be loaded last
zinit ice wait lucid atinit"zpcompinit; zpcdreplay"
zinit light zsh-users/zsh-syntax-highlighting

# Turbo load more completions. Use blockf and zinit creinstall to use zinit
# to handle completions
zinit ice wait lucid blockf atpull'zinit creinstall -q .'
zinit light zsh-users/zsh-completions

# Load a bunch of nice stuff from OMZ. These have issues if you turbo load
zinit snippet OMZ::lib/completion.zsh
zinit snippet OMZ::lib/history.zsh
zinit snippet OMZ::lib/key-bindings.zsh

# Easy extraction
zinit ice wait lucid
zinit snippet OMZ::plugins/extract/extract.plugin.zsh

# All new terminals automatically go to the last working directory (lwd does the same)
# This has issues if you turbo load
zinit snippet OMZ::plugins/last-working-dir/last-working-dir.plugin.zsh

# Easier history searching
# This has issues if you turbo load
zinit light zsh-users/zsh-history-substring-search
bindkey 'OA' history-substring-search-up
bindkey 'OB' history-substring-search-down
bindkey '^P'   history-substring-search-up
bindkey '^N'   history-substring-search-down
