# My standard interactive shell config files, override oh-my-zsh
source ~/.standard.sh

# Install zplugin if not already installed
if [ ! -d "${HOME}/.zplugin" ]; then
  sh -c "$(curl -fsSL https://raw.githubusercontent.com/zdharma/zplugin/master/doc/mod-install.sh)"
fi
module_path+=( "${HOME}/.zplugin/mod-bin/zmodules/Src" )
zmodload zdharma/zplugin
source "${HOME}/.zplugin/mod-bin/zplugin.zsh"

# I'm a traitor in the shell. I like emacs bindings there
bindkey -e

# Pure Prompt
zplugin ice pick"async.zsh" src"pure.zsh"
zplugin light sindresorhus/pure

# Add syntax highlighting. We zpcompinit and zcpdreplay at init because syntax
# highlighters expect to be loaded last
zplugin ice wait lucid atinit"zpcompinit; zpcdreplay"
zplugin light zdharma/fast-syntax-highlighting

# Turbo load more completions. Use blockf and zplugin creinstall to use zplugin
# to handle completions
zplugin ice wait lucid blockf atpull'zplugin creinstall -q .'
zplugin light zsh-users/zsh-completions

# Easy extraction
zplugin ice wait lucid
zplugin snippet OMZ::plugins/extract/extract.plugin.zsh

# All new terminals automatically go to the last working directory (lwd does the same)
zplugin snippet OMZ::plugins/last-working-dir/last-working-dir.plugin.zsh

# Highlight completions. Taken from OMZ
zstyle ':completion:*:*:*:*:*' menu select

# Keybindings
# A lot of these were ripped from
# https://github.com/ohmyzsh/ohmyzsh/blob/master/lib/key-bindings.zsh
# Make <HOME> and <END> work
bindkey "${terminfo[khome]}" beginning-of-line
bindkey "${terminfo[kend]}"  end-of-line
# <C-right> and <C-right> move through words
bindkey '^[[1;5C' forward-word
bindkey '^[[1;5D' backward-word
# Make <S-Tab> work
bindkey "${terminfo[kcbt]}" reverse-menu-complete

# Easier history searching
zplugin light zsh-users/zsh-history-substring-search
bindkey 'OA' history-substring-search-up
bindkey 'OB' history-substring-search-down
bindkey '^P'   history-substring-search-up
bindkey '^N'   history-substring-search-down

# Source fzf files added by pacman
if [[ -d /usr/share/fzf ]]; then
  source /usr/share/fzf/key-bindings.zsh
  source /usr/share/fzf/completion.zsh
fi
